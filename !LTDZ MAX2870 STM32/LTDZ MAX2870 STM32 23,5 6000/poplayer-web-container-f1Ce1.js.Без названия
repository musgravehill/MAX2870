(window["webpackJsonp-ae-ru-buyer-experience/detail-ui-3"]=window["webpackJsonp-ae-ru-buyer-experience/detail-ui-3"]||[]).push([[3],{624:function(e,t,n){"use strict";var o={},r=decodeURIComponent,i=encodeURIComponent;function a(e){return"string"==typeof e}function c(e){return a(e)&&""!==e}function s(e){if(!c(e))throw new TypeError("Cookie name must be a non-empty string")}function p(e){return e}o.get=function(e,t){s(e),t="function"==typeof t?{converter:t}:t||{};var n=function(e,t){var n={};if(a(e)&&e.length>0)for(var o,i,c,s=t?r:p,l=e.split(/;\s/g),u=0,f=l.length;u<f;u++){if((c=l[u].match(/([^=]+)=/i))instanceof Array)try{o=r(c[1]),i=s(l[u].substring(c[1].length+1))}catch(e){}else o=r(l[u]),i="";o&&(n[o]=i)}return n}(document.cookie,!t.raw);return(t.converter||p)(n[e])},o.set=function(e,t,n){s(e);var o=(n=n||{}).expires,r=n.domain,a=n.path;n.raw||(t=i(String(t)));var p=e+"="+t,l=o;return"number"==typeof l&&(l=new Date).setDate(l.getDate()+o),l instanceof Date&&(p+="; expires="+l.toUTCString()),c(r)&&(p+="; domain="+r),c(a)&&(p+="; path="+a),n.secure&&(p+="; secure"),document.cookie=p,p},o.remove=function(e,t){return(t=t||{}).expires=new Date(0),this.set(e,"",t)};var l=o;t.default=l},625:function(e,t,n){"use strict";t.getFixedDomainUrl=function(){return o};var o="aliexpress.com";[{reg:/aliexpress.ru/,domain:"aliexpress.ru"},{reg:/tmall.ru/,domain:"tmall.ru"}].forEach((function(e){e.reg.test(window.location.host)&&(o=e.domain)}))},626:function(e,t,n){"use strict";function o(e){var t=Object.keys(e.params).map((function(t){return t+"="+e.params[t]})).join("&");window.goldlog&&window.goldlog.record(e.path,e.event,"st_page_id=".concat(window.dmtrack_pageid,"&").concat(t),"POST")}function r(e){try{window.goldlog?o(e):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.aplus_pubsub.subscribe",arguments:["goldlogReady",function(){o(e)}]})}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.click=function(e){r({path:"/ae.pc_click.statweb_ae_click",event:"CLK",params:e})},t.exposure=function(e){r({path:"/ae.pc_ctr.statweb_ae_ctr",event:"EXP",params:e})}},772:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return F}));var o="poplayer-web-container-cachetimes",r=location.href.substring(0,location.href.indexOf("#")<0?location.href.length:location.href.indexOf("#")),i=r.substr(r.indexOf("?")),a={};i&&i.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(e,t,n,o){return a[t]=decodeURIComponent(o),""}));var c=function(){return(c=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))},p=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},l=!1;window.lib&&window.lib.mtop||(l=!0,n(294));var u=n(624),f=n(625),d=function(e,t){var n=u.default.get(e,{domain:(0,f.getFixedDomainUrl)(),path:"/",raw:!0})||"",o=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)");n.match(o);var r=RegExp.$2;return o.test(n)&&function(e,t){var n={b_localeFormat:/^[a-z]{2}_[A-Z]{2}$/,c_tpFormat:/^[A-Z]{3}$/,regionFormat:/^[A-Z]{2,3}$/,signFormat:/^(y|n)$/};return!/(&|=)/.test(t)&&(t&&n[e+"Format"]&&n[e+"Format"].test(t))}(t,r)?r:""};window.__getCookie=d;var y=function(e){var t,n,o=d("aep_usuc_f","b_locale"),r=d("aep_usuc_f","c_tp");return t={type:"POST",api:"mtop.aliexpress.usertouch.poplayer.get",v:"2.0",data:{currency:r,lang:o,clientType:"pc",positionSign:e}},void 0===n&&(n={}),s(void 0,void 0,void 0,(function(){var e,n;return p(this,(function(o){return l&&((e=window.lib.mtop.config).H5Request=!0,e.prefix=a.__prefix||"acs",e.subDomain="",e.mainDomain=location.hostname.indexOf("aliexpress")>=0?location.hostname.substr(location.hostname.indexOf("aliexpress")):"aliexpress.com"),n=c(c({},t),{v:t.v||"1.0",encode:"1",ecode:1,appKey:24815441,data:t.data}),[2,window.lib.mtop.request(n).then((function(e){return e})).catch((function(e){throw e}))]}))}))};function h(e){throw e}var g=function(){return(g=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},m={};try{localStorage.getItem(o)&&(m=JSON.parse(localStorage.getItem(o)||"")||{})}catch(e){m={}}var v,w=(v={reducer:function(e){switch(void 0===e&&(e={}),e.type){case"add":return e.payload;case"reduceTime":return t=e.payload.key,(o=m[t]).times-o.showTimes>0?g(g({},m),((n={})[t]=g(g({},o),{showTimes:o.showTimes+1}),n)):m;case"addTime":return function(e,t){var n,o=m[e];return g(g({},m),((n={})[e]=g(g({},o),{showTimes:o.showTimes-t}),n))}(e.payload.key,e.payload.times);default:h("action should has type property")}var t,n,o},afterProcess:[function(e){m=e,localStorage.setItem(o,JSON.stringify(m))}]},function(e){var t;void 0===e&&(e={});var n=v.reducer(e);null===(t=null==v?void 0:v.afterProcess)||void 0===t||t.forEach((function(e){e(n)}))}),b=function(){var e="postMessage"in window;function t(e,t,n){var o="";if(arguments.length<2?o="target error - target and name are both required":"object"!=typeof e?o="target error - target itself must be window object":"string"!=typeof t&&(o="target error - target name must be string type"),o)throw new Error(o);this.target=e,this.name=t,this.prefix=n}function n(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||"[PROJECT_NAME]",this.initListen()}return t.prototype.send=e?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},n.prototype.addTarget=function(e,n){var o=new t(e,n,this.prefix);this.targets[n]=o},n.prototype.initListen=function(){var t=this,n=function(e){if("object"==typeof e&&e.data&&e.data.indexOf&&e.data.indexOf("__Messenger__")>=0)for(var n=(e=e.data).split("__Messenger__"),o=(e=n[1],n[0].split("|")),r=o[0],i=o[1],a=0;a<t.listenFunc.length;a++)r+i===t.prefix+t.name&&t.listenFunc[a](e)};e?"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n):window.navigator[this.prefix+this.name]=n},n.prototype.listen=function(e){for(var t=0,n=this.listenFunc.length,o=!1;t<n;t++)if(this.listenFunc[t]==e){o=!0;break}o||this.listenFunc.push(e)},n.prototype.clear=function(){this.listenFunc=[]},n.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)},n}();function _(e,t,n){var o=e.indexOf("?");return o>=0&&(o<e.indexOf("#")||e.indexOf("#")<0)?e.replace(/\?/,"?"+t+"="+encodeURIComponent(n)+"&"):e.indexOf("#")>=0?e.replace("#","?"+t+"="+encodeURIComponent(n)+"#"):e+"?"+t+"="+encodeURIComponent(n)}var x=n(626),k=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))},O=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},S=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function T(e){return k(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(r){try{t=e.type,n=S(e,["type"]),Object.keys(n||{}).reduce((function(t,o){var r=n[o];return e[o]=r,r?t+"&"+o+"="+r:t}),""),o=[""+e.log_key,"click"===t?"CLK":"EXP"],"poplayer","click"===t?e.ae_page_type="poplayer":e.exp_type="poplayer",e.st_page_id=window.dmtrack_pageid||"12231",e.spm_cnt=e.spm_cnt||"a2g0n.poplayer","CLK"===o[1]?Object(x.click)(e):Object(x.exposure)(e)}catch(e){console.log(e)}return[2]}))}))}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},E=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((o=o.apply(e,t||[])).next())}))},P=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},C="postMessage"in window;function I(e){return"number"==typeof e||/^\d+$/.test(""+e)?e+"px":e}function F(e){var t;return E(this,void 0,void 0,(function(){var n,o,r,i,c,s;return P(this,(function(p){switch(p.label){case 0:return T({spm_cnt:"a2g0n.poplayer.trigger",type:"expose",positionSign:e.positionSign,exp_page:e.positionSign,exp_type:"poplayer"}),[4,y(e.positionSign)];case 1:return n=p.sent(),o=m,r=null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.popLayerRuleMap,i=Object.keys(r).reduce((function(e,t){var n;return j(j({},e),((n={})[t]=JSON.parse(r[t]),n))}),{}),c=Object.keys(i).reduce((function(e,t){var n,r,a,c,s,p=i[t];return j(j({},e),((n={})[p.uuid]=j({times:p.times,type:p.type,priority:p.priority},(c=p.times,s=null===(r=o[p.uuid])||void 0===r?void 0:r.showTimes,void 0===(null===(a=o[p.uuid])||void 0===a?void 0:a.startTime)&&0,{showTimes:0===c?-1:s||0})),n))}),{}),w({type:"add",payload:c}),(s=function(e){var t=[];for(var n in e)t.push(j(j({},e[n]),{uuid:n}));var o={smallImage:!1,other:!1},r=t.sort((function(e,t){return t.priority-e.priority})).filter((function(e){return e.times>e.showTimes}));if(r.length){var i=r.filter((function(e){if("smallImage"===e.type){if(!o.smallImage)return o.smallImage=!0,!0}else if(!o.other)return o.other=!0,!0;return!1}));return console.log(i),i.map((function(e){return e.uuid}))}return[]}(c)).length&&s.forEach((function(t){var n,o,r,c,s,p,l=null===(o=null===(n=i[t])||void 0===n?void 0:n.params)||void 0===o?void 0:o.extGcpOutputPageUrl;if(l&&C){T({spm_cnt:"a2g0n.poplayer.openurl",type:"expose",positionSign:e.positionSign,track:null===(c=null===(r=i[t])||void 0===r?void 0:r.params)||void 0===c?void 0:c.track,exp_page:l,exp_type:"poplayer"});var u=function(e,t,n){var o=document.createElement("iframe"),r=t.split(/_/)&&t.split(/_/)[2];return r&&(o.src=_(_(_(e,"__poplayer_preserve_uuid",r),"__prefix",a.__prefix||""),"__poplayer_position_sign",n),console.log(o.src),o.name=t,o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.display="none",o.style.position="fixed",o.style.zIndex="-100",o.style.left="0",o.style.top="0",o.style.transform="translate3d(0, 0, -100)",document.body.appendChild(o)),o}(l,t,e.positionSign);u.onerror=function(e){console.log(e)},function(e,t,n,o,r){var i=e.split(/_/)&&e.split(/_/)[2],a=new b(i+"parent",void 0);a.addTarget(t.contentWindow,i),a.listen((function(i){var a=JSON.parse(i);switch(console.log(a),a.type){case"load":T({spm_cnt:"a2g0n.poplayer.load-sucess",type:"expose",exp_page:o,positionSign:r,exp_type:"poplayer",track:n});break;case"resizeWidthPosition":a.payload&&a.payload.width&&(t.style.width=I(a.payload.width)),a.payload&&a.payload.height&&(t.style.height=I(a.payload.height)),a.payload&&a.payload.top&&(t.style.top=I(a.payload.top)),a.payload&&a.payload.bottom&&(t.style.bottom=I(a.payload.bottom)),a.payload&&a.payload.left&&(t.style.left=I(a.payload.left)),a.payload&&a.payload.right&&(t.style.right=I(a.payload.right));break;case"show":T({spm_cnt:"a2g0n.poplayer.display",type:"expose",positionSign:r,exp_page:o,exp_type:"poplayer",track:n}),t.style.display="block",t.style.zIndex="1000000",t.style.transform="translate3d(0, 0, 10000)",w({type:"reduceTime",payload:{key:e}});break;case"addTime":w({type:"addTime",payload:{key:e,times:a.payload}});break;case"link":var c=a.payload;window.location.href=c,T({spm_cnt:"a2g0n.poplayer.jump",type:"click",positionSign:r,exp_page:o,exp_type:"poplayer",track:n});break;case"close":document.body.removeChild(t),T({spm_cnt:"a2g0n.poplayer.close",type:"click",positionSign:r,exp_page:o,exp_type:"poplayer",track:n});break;case"failed":document.body.removeChild(t),T({spm_cnt:"a2g0n.poplayer.hidden",type:"expose",positionSign:r,exp_page:o,track:n,exp_type:"poplayer"});break;default:document.body.removeChild(t),h("never unknown message happen, auto close poplayer")}}))}(t,u,null===(p=null===(s=i[t])||void 0===s?void 0:s.params)||void 0===p?void 0:p.track,l,e.positionSign)}})),[2]}}))}))}}}]);